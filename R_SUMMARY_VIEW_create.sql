CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `r_summary_view` AS (select `budget_view`.`PERIOD` AS `PERIOD`,`budget_view`.`TRID` AS `TRID`,`budget_view`.`TRID_CODE` AS `TRID_CODE`,(case when isnull(`transaction_view`.`DEBIT`) then 0.000 else `transaction_view`.`DEBIT` end) AS `DEBIT`,`budget_view`.`CREDIT` AS `CREDIT`,round(((((case when isnull(`transaction_view`.`DEBIT`) then 0.0000 else `transaction_view`.`DEBIT` end) * -(1)) - `budget_view`.`CREDIT`) * -(1)),2) AS `VAR`,if((((((case when isnull(`transaction_view`.`DEBIT`) then 0.000 else `transaction_view`.`DEBIT` end) * -(1)) - `budget_view`.`CREDIT`) * -(1)) < -(0)),1,0) AS `VAR_FLG` from (`budget_view` left join `transaction_view` on(((convert(`budget_view`.`PERIOD` using utf8) = `transaction_view`.`PERIOD`) and (`budget_view`.`TRID` = `transaction_view`.`TRID`) and (`budget_view`.`TRID_CODE` = `transaction_view`.`TRID_CODE`)))) order by `transaction_view`.`PERIOD` desc);